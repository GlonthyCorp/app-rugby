<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rugby Analysis System</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useReducer } = React;
        const { ChevronLeft, ChevronRight, Users, BarChart3, Timer, Target, Activity, TrendingUp, Undo2, UserPlus, Wifi, WifiOff, MapPin } = lucide;

        // Estado inicial del partido
        const initialGameState = {
            kicks: {
                total: 0,
                offensive: 0,
                positional: 0,
                staysIn: 0,
                goesOut: 0,
                cajon9: 0,
                otherTypes: 0,
                recovered: 0,
                notRecovered: 0,
                events: []
            },
            lineouts: {
                own: { 
                    total: 0, 
                    won: 0, 
                    lost: 0,
                    zones: { own22: 0, middle: 0, opponent22: 0 },
                    players: { 2: 0, 4: 0, 6: 0, 8: 0 },
                    postThrow: { good: 0, regular: 0, bad: 0 },
                    maul: { effective: 0, ineffective: 0, notApplicable: 0 },
                    playerStats: {}
                },
                opponent: { 
                    total: 0, 
                    stolen: 0, 
                    complicated: 0,
                    zones: { own22: 0, middle: 0, opponent22: 0 }
                },
                kickoffs: {
                    received: 0,
                    effective: 0,
                    ineffective: 0,
                    players: {},
                    tackle: { effective: 0, ineffective: 0 },
                    pressure: { effective: 0, ineffective: 0 }
                },
                events: []
            },
            scrums: {
                own: { 
                    total: 0, 
                    positive: 0, 
                    negative: 0,
                    entryWon: 0,
                    entryLost: 0,
                    ballUseGood: 0,
                    ballUseBad: 0,
                    turnCorrect: 0,
                    turnIncorrect: 0
                },
                opponent: { 
                    total: 0
                },
                penalties: { for: 0, against: 0 },
                events: []
            },
            attack: {
                decisions: [],
                executions: [],
                runs: { total: 0, effective: 0, ineffective: 0 },
                finalDecisions: { good: 0, regular: 0, bad: 0 },
                roles: {},
                events: []
            },
            players: Array.from({length: 23}, (_, i) => ({
                number: i + 1,
                active: true,
                cards: 0,
                injured: false,
                lineoutCatches: 0,
                lineoutMisses: 0,
                kickoffReceptions: 0,
                kickoffEffective: 0
            })),
            history: [],
            connectedUsers: ['Entrenador Principal']
        };

        // Zones del campo
        const fieldZones = [
            { id: 'own22', name: 'Nuestros 22', color: 'bg-red-100' },
            { id: 'middle', name: 'Medio Campo', color: 'bg-yellow-100' },
            { id: 'opponent22', name: 'Sus 22', color: 'bg-green-100' }
        ];

        // NÃºmero de jugadores para lineout
        const lineoutPlayers = [2, 4, 6, 8];

        // Reducer para manejar el estado del juego
        function gameReducer(state, action) {
            const newState = { ...state };
            const timestamp = new Date().toISOString();

            switch (action.type) {
                case 'ADD_KICK':
                    const kickEvent = {
                        id: Date.now(),
                        timestamp,
                        type: 'kick',
                        player: action.player,
                        data: action.data
                    };

                    newState.kicks = {
                        ...state.kicks,
                        total: state.kicks.total + 1,
                        [action.data.kickType]: state.kicks[action.data.kickType] + 1,
                        [action.data.result]: state.kicks[action.data.result] + 1,
                        [action.data.specific]: state.kicks[action.data.specific] + 1,
                        [action.data.recovery]: state.kicks[action.data.recovery] + 1,
                        events: [...state.kicks.events, kickEvent]
                    };

                    newState.history = [kickEvent, ...state.history].slice(0, 20);
                    return newState;

                case 'ADD_LINEOUT':
                    const lineoutEvent = {
                        id: Date.now(),
                        timestamp,
                        type: 'lineout',
                        player: action.player,
                        data: action.data
                    };

                    if (action.data.team === 'own') {
                        newState.lineouts = {
                            ...state.lineouts,
                            own: {
                                ...state.lineouts.own,
                                total: state.lineouts.own.total + 1,
                                [action.data.result]: state.lineouts.own[action.data.result] + 1,
                                zones: {
                                    ...state.lineouts.own.zones,
                                    [action.data.zone]: state.lineouts.own.zones[action.data.zone] + 1
                                },
                                players: {
                                    ...state.lineouts.own.players,
                                    [action.data.playersUsed]: state.lineouts.own.players[action.data.playersUsed] + 1
                                },
                                postThrow: {
                                    ...state.lineouts.own.postThrow,
                                    [action.data.postThrow]: state.lineouts.own.postThrow[action.data.postThrow] + 1
                                },
                                maul: {
                                    ...state.lineouts.own.maul,
                                    [action.data.maul]: state.lineouts.own.maul[action.data.maul] + 1
                                },
                                playerStats: {
                                    ...state.lineouts.own.playerStats,
                                    [action.player]: {
                                        catches: (state.lineouts.own.playerStats[action.player]?.catches || 0) + (action.data.result === 'won' ? 1 : 0),
                                        misses: (state.lineouts.own.playerStats[action.player]?.misses || 0) + (action.data.result === 'lost' ? 1 : 0)
                                    }
                                }
                            },
                            events: [...state.lineouts.events, lineoutEvent]
                        };
                    } else {
                        newState.lineouts = {
                            ...state.lineouts,
                            opponent: {
                                ...state.lineouts.opponent,
                                total: state.lineouts.opponent.total + 1,
                                [action.data.result]: state.lineouts.opponent[action.data.result] + 1,
                                zones: {
                                    ...state.lineouts.opponent.zones,
                                    [action.data.zone]: state.lineouts.opponent.zones[action.data.zone] + 1
                                }
                            },
                            events: [...state.lineouts.events, lineoutEvent]
                        };
                    }

                    newState.history = [lineoutEvent, ...state.history].slice(0, 20);
                    return newState;

                case 'ADD_KICKOFF':
                    const kickoffEvent = {
                        id: Date.now(),
                        timestamp,
                        type: 'kickoff',
                        player: action.player,
                        data: action.data
                    };

                    newState.lineouts = {
                        ...state.lineouts,
                        kickoffs: {
                            ...state.lineouts.kickoffs,
                            received: state.lineouts.kickoffs.received + 1,
                            [action.data.effectiveness]: state.lineouts.kickoffs[action.data.effectiveness] + 1,
                            players: {
                                ...state.lineouts.kickoffs.players,
                                [action.player]: (state.lineouts.kickoffs.players[action.player] || 0) + 1
                            },
                            [action.data.tackle]: state.lineouts.kickoffs[action.data.tackle] + 1,
                            [action.data.pressure]: state.lineouts.kickoffs[action.data.pressure] + 1
                        },
                        events: [...state.lineouts.events, kickoffEvent]
                    };

                    newState.players = state.players.map(player => 
                        player.number === action.player
                            ? {
                                ...player,
                                kickoffReceptions: player.kickoffReceptions + 1,
                                kickoffEffective: player.kickoffEffective + (action.data.effectiveness === 'effective' ? 1 : 0)
                            }
                            : player
                    );

                    newState.history = [kickoffEvent, ...state.history].slice(0, 20);
                    return newState;

                case 'ADD_SCRUM':
                    const scrumEvent = {
                        id: Date.now(),
                        timestamp,
                        type: 'scrum',
                        player: action.player,
                        data: action.data
                    };

                    if (action.data.team === 'own') {
                        newState.scrums = {
                            ...state.scrums,
                            own: {
                                ...state.scrums.own,
                                total: state.scrums.own.total + 1,
                                [action.data.result]: state.scrums.own[action.data.result] + 1,
                                [action.data.entry]: state.scrums.own[action.data.entry] + 1,
                                [action.data.ballUse]: state.scrums.own[action.data.ballUse] + 1,
                                [action.data.turn]: state.scrums.own[action.data.turn] + 1
                            },
                            events: [...state.scrums.events, scrumEvent]
                        };
                    } else {
                        newState.scrums = {
                            ...state.scrums,
                            opponent: {
                                ...state.scrums.opponent,
                                total: state.scrums.opponent.total + 1
                            },
                            events: [...state.scrums.events, scrumEvent]
                        };
                    }

                    if (action.data.penalty) {
                        newState.scrums = {
                            ...newState.scrums,
                            penalties: {
                                ...newState.scrums.penalties,
                                [action.data.penalty]: newState.scrums.penalties[action.data.penalty] + 1
                            }
                        };
                    }

                    newState.history = [scrumEvent, ...state.history].slice(0, 20);
                    return newState;

                case 'ADD_ATTACK':
                    const attackEvent = {
                        id: Date.now(),
                        timestamp,
                        type: 'attack',
                        player: action.player,
                        data: action.data
                    };

                    if (action.data.type === 'rating') {
                        newState.attack = {
                            ...state.attack,
                            [action.data.category]: [...state.attack[action.data.category], action.data.rating],
                            events: [...state.attack.events, attackEvent]
                        };
                    } else if (action.data.type === 'run') {
                        newState.attack = {
                            ...state.attack,
                            runs: {
                                total: state.attack.runs.total + 1,
                                [action.data.effectiveness]: state.attack.runs[action.data.effectiveness] + 1
                            },
                            events: [...state.attack.events, attackEvent]
                        };
                    } else if (action.data.type === 'decision') {
                        newState.attack = {
                            ...state.attack,
                            finalDecisions: {
                                ...state.attack.finalDecisions,
                                [action.data.quality]: state.attack.finalDecisions[action.data.quality] + 1
                            },
                            events: [...state.attack.events, attackEvent]
                        };
                    } else if (action.data.type === 'role') {
                        newState.attack = {
                            ...state.attack,
                            roles: {
                                ...state.attack.roles,
                                [action.data.role]: (state.attack.roles[action.data.role] || 0) + 1
                            },
                            events: [...state.attack.events, attackEvent]
                        };
                    }

                    newState.history = [attackEvent, ...state.history].slice(0, 20);
                    return newState;

                case 'UNDO_LAST_ACTION':
                    if (state.history.length === 0) return state;
                    
                    const lastEvent = state.history[0];
                    const newHistory = state.history.slice(1);
                    
                    newState.history = newHistory;
                    return newState;

                case 'ADD_USER':
                    newState.connectedUsers = [...state.connectedUsers, action.userName];
                    return newState;

                case 'RESET_GAME':
                    return initialGameState;

                default:
                    return state;
            }
        }

        // Componente Selector de Jugadores
        const PlayerSelector = ({ selectedPlayer, onPlayerSelect, compact = false }) => {
            const [showSelector, setShowSelector] = useState(false);

            if (compact) {
                return React.createElement('div', { className: 'relative' },
                    React.createElement('button', {
                        onClick: () => setShowSelector(!showSelector),
                        className: `w-16 h-16 rounded-full text-white font-bold text-lg ${
                            selectedPlayer ? 'bg-blue-600' : 'bg-gray-400'
                        } border-2 border-white shadow-lg`
                    }, selectedPlayer || '?'),
                    
                    showSelector && React.createElement('div', {
                        className: 'absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-white border-2 border-gray-200 rounded-lg shadow-xl p-4 z-50'
                    },
                        React.createElement('div', { className: 'grid grid-cols-5 gap-2 max-h-60 overflow-y-auto' },
                            Array.from({length: 23}, (_, i) => i + 1).map(num =>
                                React.createElement('button', {
                                    key: num,
                                    onClick: () => {
                                        onPlayerSelect(num);
                                        setShowSelector(false);
                                    },
                                    className: 'w-10 h-10 bg-blue-100 hover:bg-blue-200 rounded-full text-sm font-semibold'
                                }, num)
                            )
                        )
                    )
                );
            }

            return React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow-sm border' },
                React.createElement('h3', { className: 'font-semibold mb-3 text-center' }, 'Seleccionar Jugador'),
                React.createElement('div', { className: 'grid grid-cols-5 gap-2' },
                    Array.from({length: 23}, (_, i) => i + 1).map(num =>
                        React.createElement('button', {
                            key: num,
                            onClick: () => onPlayerSelect(num),
                            className: `w-12 h-12 rounded-full text-sm font-semibold transition-colors ${
                                selectedPlayer === num 
                                    ? 'bg-blue-600 text-white' 
                                    : 'bg-gray-100 hover:bg-gray-200 text-gray-700'
                            }`
                        }, num)
                    )
                )
            );
        };

        // Selector de Zona del Campo
        const ZoneSelector = ({ selectedZone, onZoneSelect, title = "Zona del Campo" }) => {
            return React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow-sm' },
                React.createElement('h3', { className: 'font-semibold mb-3 text-center' }, title),
                React.createElement('div', { className: 'grid grid-cols-3 gap-2' },
                    fieldZones.map(zone =>
                        React.createElement('button', {
                            key: zone.id,
                            onClick: () => onZoneSelect(zone.id),
                            className: `p-3 rounded-lg text-center transition-colors ${
                                selectedZone === zone.id 
                                    ? 'bg-blue-600 text-white' 
                                    : `${zone.color} hover:bg-blue-100 text-gray-700`
                            }`
                        },
                            React.createElement('div', { className: 'text-xs font-medium' }, zone.name)
                        )
                    )
                )
            );
        };

        // Componente para calificaciÃ³n por estrellas
        const StarRating = ({ rating, onRate, label }) => {
            return React.createElement('div', { className: 'flex flex-col items-center space-y-3' },
                React.createElement('span', { className: 'text-base font-medium text-gray-700' }, label),
                React.createElement('div', { className: 'flex space-x-2' },
                    [1, 2, 3, 4, 5].map((star) =>
                        React.createElement('button', {
                            key: star,
                            onClick: () => onRate(star),
                            className: `text-3xl ${star <= rating ? 'text-yellow-400' : 'text-gray-300'} hover:text-yellow-400 transition-colors active:scale-110`
                        }, 'â­')
                    )
                )
            );
        };

        // Header con indicador de usuarios conectados
        const AppHeader = ({ connectedUsers, onResetGame }) => {
            const [showUsers, setShowUsers] = useState(false);

            return React.createElement('header', { className: 'bg-white shadow-sm border-b sticky top-0 z-30' },
                React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-3' },
                    React.createElement('div', { className: 'flex items-center justify-between' },
                        React.createElement('h1', { className: 'text-lg md:text-2xl font-bold text-gray-900' }, 'Rugby Analysis'),
                        
                        React.createElement('div', { className: 'flex items-center space-x-3' },
                            React.createElement('div', { className: 'relative' },
                                React.createElement('button', {
                                    onClick: () => setShowUsers(!showUsers),
                                    className: 'flex items-center space-x-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm'
                                },
                                    React.createElement(Wifi, { size: 16 }),
                                    React.createElement('span', null, connectedUsers.length)
                                ),
                                
                                showUsers && React.createElement('div', { className: 'absolute top-full right-0 mt-2 bg-white border rounded-lg shadow-lg p-3 min-w-48' },
                                    React.createElement('h4', { className: 'font-semibold mb-2' }, 'Usuarios conectados:'),
                                    connectedUsers.map((user, index) =>
                                        React.createElement('div', { key: index, className: 'text-sm text-gray-600 py-1' }, 'â€¢ ' + user)
                                    )
                                )
                            ),

                            React.createElement('button', {
                                onClick: onResetGame,
                                className: 'px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm'
                            }, 'Reset')
                        )
                    )
                )
            );
        };

        // MÃ³dulo 1: Encargado de Pie
        const KickAnalysis = ({ onAddKick }) => {
            const [selectedPlayer, setSelectedPlayer] = useState(null);
            const [kickType, setKickType] = useState('');
            const [result, setResult] = useState('');
            const [specific, setSpecific] = useState('');
            const [recovery, setRecovery] = useState('');

            const handleSubmit = () => {
                if (selectedPlayer && kickType && result && specific && recovery) {
                    onAddKick({
                        type: 'ADD_KICK',
                        player: selectedPlayer,
                        data: {
                            kickType,
                            result,
                            specific,
                            recovery
                        }
                    });
                    
                    setKickType('');
                    setResult('');
                    setSpecific('');
                    setRecovery('');
                }
            };

            const canSubmit = selectedPlayer && kickType && result && specific && recovery;

            return React.createElement('div', { className: 'space-y-6' },
                React.createElement(PlayerSelector, { selectedPlayer, onPlayerSelect: setSelectedPlayer }),

                React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow-sm' },
                    React.createElement('h3', { className: 'font-semibold mb-3 text-center' }, 'Tipo de Patada'),
                    React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                        React.createElement('button', {
                            onClick: () => setKickType('offensive'),
                            className: `p-4 rounded-lg text-center transition-colors ${
                                kickType === 'offensive' ? 'bg-green-500 text-white' : 'bg-gray-100 hover:bg-gray-200'
                            }`
                        },
                            React.createElement('div', { className: 'text-lg' }, 'âš¡'),
                            React.createElement('div', { className: 'text-sm font-medium' }, 'Ofensiva')
                        ),
                        React.createElement('button', {
                            onClick: () => setKickType('positional'),
                            className: `p-4 rounded-lg text-center transition-colors ${
                                kickType === 'positional' ? 'bg-green-500 text-white' : 'bg-gray-100 hover:bg-gray-200'
                            }`
                        },
                            React.createElement('div', { className: 'text-lg' }, 'ðŸ“'),
                            React.createElement('div', { className: 'text-sm font-medium' }, 'Posicional')
                        )
                    )
                ),

                React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow-sm' },
                    React.createElement('h3', { className: 'font-semibold mb-3 text-center' }, 'Resultado del BalÃ³n'),
                    React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                        React.createElement('button', {
                            onClick: () => setResult('staysIn'),
                            className: `p-4 rounded-lg text-center transition-colors ${
                                result === 'staysIn' ? 'bg-blue-500 text-white' : 'bg-gray-100 hover:bg-gray-200'
                            }`
                        },
                            React.createElement('div', { className: 'text-lg' }, 'âœ…'),
                            React.createElement('div', { className: 'text-sm font-medium' }, 'Queda Adentro')
                        ),
                        React.createElement('button', {
                            onClick: () => setResult('goesOut'),
                            className: `p-4 rounded-lg text-center transition-colors ${
                                result === 'goesOut' ? 'bg-blue-500 text-white' : 'bg-gray-100 hover:bg-gray-200'
                            }`
                        },
                            React.createElement('div', { className: 'text-lg' }, 'â†—ï¸'),
                            React.createElement('div', { className: 'text-sm font-medium' }, 'Sale del Campo')
                        )
                    )
                ),

                React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow-sm' },
                    React.createElement('h3', { className: 'font-semibold mb-3 text-center' }, 'Tipo EspecÃ­fico'),
                    React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                        React.createElement('button', {
                            onClick: () => setSpecific('cajon9'),
                            className: `p-4 rounded-lg text-center transition-colors ${
                                specific === 'cajon9' ? 'bg-purple-500 text-white' : 'bg-gray-100 hover:bg-gray-200'
                            }`
                        },
                            React.createElement('div', { className: 'text-lg' }, '9ï¸âƒ£'),
                            React.createElement('div', { className: 'text-sm font-medium' }, 'CajÃ³n del 9')
                        ),
                        React.createElement('button', {
                            onClick: () => setSpecific('otherTypes'),
                            className: `p-4 rounded-lg text-center transition-colors ${
                                specific === 'otherTypes' ? 'bg-purple-500 text-white' : 'bg-gray-100 hover:bg-gray-200'
                            }`
                        },
                            React.createElement('div', { className: 'text-lg' }, 'ðŸ¦¶'),
                            React.createElement('div', { className: 'text-sm font-medium' }, 'Otro Tipo')
                        )
                    )
                ),

                React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow-sm' },
                    React.createElement('h3', { className: 'font-semibold mb-3 text-center' }, 'RecuperaciÃ³n'),
                    React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                        React.createElement('button', {
                            onClick: () => setRecovery('recovered'),
                            className: `p-4 rounded-lg text-center transition-colors ${
                                recovery === 'recovered' ? 'bg-green-600 text-white' : 'bg-gray-100 hover:bg-gray-200'
                            }`
                        },
                            React.createElement('div', { className: 'text-lg' }, 'âœ…'),
                            React.createElement('div', { className: 'text-sm font-medium' }, 'Recuperamos')
                        ),
                        React.createElement('button', {
                            onClick: () => setRecovery('notRecovered'),
                            className: `p-4 rounded-lg text-center transition-colors ${
                                recovery === 'notRecovered' ? 'bg-red-600 text-white' : 'bg-gray-100 hover:bg-gray-200'
                            }`
                        },
                            React.createElement('div', { className: 'text-lg' }, 'âŒ'),
                            React.createElement('div', { className: 'text-sm font-medium' }, 'No Recuperamos')
                        )
                    )
                ),

                React.createElement('button', {
                    onClick: handleSubmit,
                    disabled: !canSubmit,
                    className: 'w-full p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium'
                }, `Registrar Patada (${selectedPlayer ? `#${selectedPlayer}` : 'Sin jugador'})`)
            );
        };

        // Dashboard Head Coach
        const CoachDashboard = ({ gameState }) => {
            const kickStats = {
                total: gameState.kicks.total,
                offensivePerc: gameState.kicks.total > 0 ? (gameState.kicks.offensive / gameState.kicks.total * 100).toFixed(1) : 0,
                positionalPerc: gameState.kicks.total > 0 ? (gameState.kicks.positional / gameState.kicks.total * 100).toFixed(1) : 0,
                staysInPerc: gameState.kicks.total > 0 ? (gameState.kicks.staysIn / gameState.kicks.total * 100).toFixed(1) : 0,
                cajon9Perc: gameState.kicks.total > 0 ? (gameState.kicks.cajon9 / gameState.kicks.total * 100).toFixed(1) : 0,
                recoveryPerc: gameState.kicks.total > 0 ? (gameState.kicks.recovered / gameState.kicks.total * 100).toFixed(1) : 0
            };

            return React.createElement('div', { className: 'space-y-4' },
                React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow-sm' },
                    React.createElement('h2', { className: 'text-2xl font-bold mb-4 text-center text-gray-800' }, 'ðŸ“Š Dashboard Head Coach')
                ),

                React.createElement('div', { className: 'grid grid-cols-1 gap-4' },
                    React.createElement('div', { className: 'bg-blue-50 p-4 rounded-lg' },
                        React.createElement('h3', { className: 'text-lg font-bold mb-3 text-blue-800' }, 'ðŸ¦¶ JUEGO CON EL PIE'),
                        React.createElement('div', { className: 'grid grid-cols-2 gap-4 text-sm' },
                            React.createElement('div', null,
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', null, 'Total Patadas:'),
                                    React.createElement('span', { className: 'font-bold' }, kickStats.total)
                                ),
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', null, 'Ofensivas:'),
                                    React.createElement('span', null, `${gameState.kicks.offensive} (${kickStats.offensivePerc}%)`)
                                ),
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', null, 'Posicionales:'),
                                    React.createElement('span', null, `${gameState.kicks.positional} (${kickStats.positionalPerc}%)`)
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', null, 'Quedan Adentro:'),
                                    React.createElement('span', { className: 'font-bold' }, `${kickStats.staysInPerc}%`)
                                ),
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', null, 'CajÃ³n del 9:'),
                                    React.createElement('span', null, `${kickStats.cajon9Perc}%`)
                                ),
                                React.createElement('div', { className: 'flex justify-between mb-1' },
                                    React.createElement('span', null, 'RecuperaciÃ³n:'),
                                    React.createElement('span', { className: 'font-bold' }, `${kickStats.recoveryPerc}%`)
                                )
                            )
                        )
                    )
                ),

                React.createElement('div', { className: 'bg-gray-50 p-4 rounded-lg' },
                    React.createElement('h3', { className: 'text-lg font-bold mb-3 text-gray-800' }, 'ðŸŽ¯ RESUMEN'),
                    React.createElement('div', { className: 'grid grid-cols-1 gap-2 text-sm' },
                        React.createElement('div', { className: 'flex justify-between' },
                            React.createElement('span', null, 'Total eventos:'),
                            React.createElement('span', { className: 'font-bold' }, gameState.history.length)
                        ),
                        React.createElement('div', { className: 'flex justify-between' },
                            React.createElement('span', null, 'Ãšltima acciÃ³n:'),
                            React.createElement('span', { className: 'font-bold' },
                                gameState.history.length > 0 
                                    ? `#${gameState.history[0].player} - ${gameState.history[0].type}`
                                    : 'Ninguna'
                            )
                        )
                    )
                )
            );
        };

        // Componente Principal
        const RugbyAnalysisApp = () => {
            const [gameState, dispatch] = useReducer(gameReducer, initialGameState);
            const [currentModule, setCurrentModule] = useState('dashboard');
            const [userName, setUserName] = useState('');
            const [isConnected, setIsConnected] = useState(false);

            useEffect(() => {
                if (!isConnected && userName) {
                    dispatch({ type: 'ADD_USER', userName });
                    setIsConnected(true);
                }
            }, [userName, isConnected]);

            const modules = [
                { id: 'dashboard', name: 'Dashboard', icon: BarChart3, component: CoachDashboard },
                { id: 'kicks', name: 'Patadas', icon: Target, component: KickAnalysis }
            ];

            const currentModuleData = modules.find(m => m.id === currentModule);
            const CurrentComponent = currentModuleData.component;

            if (!userName) {
                return React.createElement('div', { className: 'min-h-screen bg-gray-100 flex items-center justify-center p-4' },
                    React.createElement('div', { className: 'bg-white p-8 rounded-lg shadow-lg max-w-sm w-full' },
                        React.createElement('h2', { className: 'text-2xl font-bold mb-6 text-center' }, 'Rugby Analysis'),
                        React.createElement('div', { className: 'space-y-4' },
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium mb-2' }, 'Tu nombre/rol:'),
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Ej: Entrenador Scrum',
                                    className: 'w-full p-3 border rounded-lg',
                                    onKeyPress: (e) => {
                                        if (e.key === 'Enter' && e.target.value.trim()) {
                                            setUserName(e.target.value.trim());
                                        }
                                    }
                                })
                            ),
                            React.createElement('button', {
                                onClick: () => {
                                    const input = document.querySelector('input');
                                    if (input.value.trim()) {
                                        setUserName(input.value.trim());
                                    }
                                },
                                className: 'w-full p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
                            }, 'Conectar al AnÃ¡lisis')
                        )
                    )
                );
            }

            return React.createElement('div', { className: 'min-h-screen bg-gray-100' },
                React.createElement(AppHeader, {
                    connectedUsers: gameState.connectedUsers,
                    onResetGame: () => dispatch({ type: 'RESET_GAME' })
                }),

                React.createElement('nav', { className: 'bg-white shadow-sm sticky top-16 z-20' },
                    React.createElement('div', { className: 'overflow-x-auto' },
                        React.createElement('div', { className: 'flex space-x-1 px-4 py-2 min-w-max' },
                            modules.map((module) => {
                                const Icon = module.icon;
                                return React.createElement('button', {
                                    key: module.id,
                                    onClick: () => setCurrentModule(module.id),
                                    className: `flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${
                                        currentModule === module.id
                                            ? 'bg-blue-600 text-white'
                                            : 'bg-gray-100 text-gray-700 active:bg-gray-200'
                                    }`
                                },
                                    React.createElement(Icon, { size: 16 }),
                                    React.createElement('span', { className: 'text-sm font-medium' }, module.name)
                                );
                            })
                        )
                    )
                ),

                React.createElement('main', { className: 'px-4 py-6 pb-20' },
                    currentModule === 'dashboard' && React.createElement(CurrentComponent, { gameState }),
                    currentModule === 'kicks' && React.createElement(CurrentComponent, { onAddKick: dispatch })
                )
            );
        };

        ReactDOM.render(React.createElement(RugbyAnalysisApp), document.getElementById('root'));
    </script>
</body>
</html>
